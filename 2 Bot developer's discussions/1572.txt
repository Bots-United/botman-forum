--------------------------------------------------
Subject: UTIL_TraceLine
--------------------------------------------------
04/23/01 at 11:03:22  Posted by: billybot (Nulosoft@aol.com)
--------------------------------------------------
Is it possible to do a TraceLine and find non-solid entities??? or catch the DispatchTouch function to find who hit what? Or also if a yellow glow shell is over the enemy... I still can't find how to make the bots find if the player is god!

--------------------------------------------------
04/23/01 at 11:33:47  Reply by: @$3.1415rin (as3.1415rin@gmx.de)
--------------------------------------------------
As always the HL - SDK is very useful. Just look for the gauss, which is able to shoot throught nonsolid stuff
It's TraceResult.fSolid



--------------------------------------------------
04/23/01 at 11:34:28  Reply by: botman (botman@mailandnews.com)
--------------------------------------------------
What entities do you mean by "non-solid"?

When DispatchTouch() is called by the engine it will have the edict of the entity being touched and the edict of the entity doing the touching.  If both entities have a Touch function active it will get called twice (with the entities one way the first time and the entities swapped around the second time).

A glow shell is an effect that is generated by changing the rendermode and the renderfx field in the edict structure.  For example here's some code that will create a blue glowing shell around the player...
code:

      pPlayer->pev->rendermode = kRenderNormal;
      pPlayer->pev->renderfx = kRenderFxGlowShell;

      pPlayer->pev->rendercolor.x = 0;  // red
      pPlayer->pev->rendercolor.y = 0;  // green
      pPlayer->pev->rendercolor.z = 255; // blue

      pPlayer->pev->renderamt = 10;  // glow shell distance from entity

botman

--------------------------------------------------
04/23/01 at 12:11:11  Reply by: billybot (Nulosoft@aol.com)
--------------------------------------------------
What I mean by non solid is that it doesn't block... is it possible to catch the render fx in the hpb bot source?

--------------------------------------------------
04/23/01 at 12:27:08  Reply by: billybot (Nulosoft@aol.com)
--------------------------------------------------

QUOTE:
Just look for the gauss, which is able to shoot throught nonsolid stuff 


Actually, I think that Gauss shoots, like the other weapons, trough non-solid stuff like water or air but it's also able to shoot through walls (which are solids)... Maybe I'm wrong but I don't think so...

--------------------------------------------------
04/23/01 at 13:25:55  Reply by: botman (botman@mailandnews.com)
--------------------------------------------------
The gauss gun doesn't actually shoot through walls.  If it encounters a wall it will start another traceline from the opposite side of the wall...
code:
// try punching through wall if secondary attack (primary is incapable of breaking through)
if ( !m_fPrimaryFire )
{
   UTIL_TraceLine( tr.vecEndPos + vecDir * 8, vecDest, dont_ignore_monsters,
                   pentIgnore, &beam_tr);

Yes, rendermode, renderfx, rendercolor and renderamt are all fields in the pev (pointer to entvars_t structure) which are accessed as pEdict->v. in the HPB bot code (i.e. pEdict->v.rendermode).

botman


--------------------------------------------------
04/23/01 at 15:01:13  Reply by: billybot (Nulosoft@aol.com)
--------------------------------------------------
Thanx a lot, I dunno what I would have done without you ;-), but, if I need it later on, do u know if TraceResult returns non-solid entity like lights or triggers... or my damn entity?

--------------------------------------------------
04/23/01 at 16:04:54  Reply by: botman (botman@mailandnews.com)
--------------------------------------------------
No, UTIL_TraceLine will only detect solid surfaces (brushes).  You can find other entities with UTIL_FindEntityInSphere() or UTIL_FindEntityByClassname().

botman

--------------------------------------------------
04/23/01 at 22:00:19  Reply by: billybot (Nulosoft@aol.com)
--------------------------------------------------
that's what I thought... thanks again fo your help

